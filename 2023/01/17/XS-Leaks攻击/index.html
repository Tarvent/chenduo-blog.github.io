<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>XS-Leaks attack through iframe counting | ChenDuo blog</title><meta name="author"><meta name="copyright"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="To analyze XS-Leaks, I used a specific attack method called &quot;iframe counting&quot; and implemented a phishing website to carry out the attack. The website&#39;s front-end and back-end were created using native">
<meta property="og:type" content="article">
<meta property="og:title" content="XS-Leaks attack through iframe counting">
<meta property="og:url" content="https://tarvent.github.io/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/index.html">
<meta property="og:site_name" content="ChenDuo blog">
<meta property="og:description" content="To analyze XS-Leaks, I used a specific attack method called &quot;iframe counting&quot; and implemented a phishing website to carry out the attack. The website&#39;s front-end and back-end were created using native">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tarvent.github.io/chenduo-blog.github.io/img/IMG_7804.jpeg">
<meta property="article:published_time" content="2023-01-16T15:53:23.000Z">
<meta property="article:modified_time" content="2023-01-18T14:13:12.210Z">
<meta property="article:tag" content="Research">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tarvent.github.io/chenduo-blog.github.io/img/IMG_7804.jpeg"><link rel="shortcut icon" href="/chenduo-blog.github.io/img/avatar.png"><link rel="canonical" href="https://tarvent.github.io/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/chenduo-blog.github.io/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/chenduo-blog.github.io/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'XS-Leaks attack through iframe counting',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-18 23:13:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/chenduo-blog.github.io/img/IMG_7804.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/chenduo-blog.github.io/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/chenduo-blog.github.io/tags/"><div class="headline">Tags</div><div class="length-num">14</div></a><a href="/chenduo-blog.github.io/categories/"><div class="headline">Categories</div><div class="length-num">14</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/guestbook/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/chenduo-blog.github.io/" title="ChenDuo blog"><span class="site-name">ChenDuo blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/chenduo-blog.github.io/guestbook/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">XS-Leaks attack through iframe counting</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-01-16T15:53:23.000Z" title="Created 2023-01-17 00:53:23">2023-01-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-01-18T14:13:12.210Z" title="Updated 2023-01-18 23:13:12">2023-01-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/chenduo-blog.github.io/categories/web-security/">web security</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="XS-Leaks attack through iframe counting"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><article class="post-content" id="article-container"><h1 id="Master-research"><a href="#Master-research" class="headerlink" title="Master research"></a>Master research</h1><h1 id="XS-leaks-attack-through-iframe"><a href="#XS-leaks-attack-through-iframe" class="headerlink" title="XS-leaks attack through iframe"></a>XS-leaks attack through iframe</h1><p>用户打开页面，window.open会打开目标网站的登录页面，js代码记录打开网址后控制台输出iframe数量，过一段时间后再次输出iframe数量，将两次iframe数打印到表单，表单再传输给node服务器记录到数据库</p>
<p>The target website’s after login uses iframe, and the number of iframes is different from the number of iframes on the login page.</p>
<ul>
<li>Window.open()</li>
</ul>
<p>The <code>window.open()</code> method is a JavaScript method that allows a web page to open a new browser window or a new tab in the same browser window. It can be used to open a new window with a specified URL, or to open a new window with a specified size and appearance.</p>
<p>The <code>window.open()</code> method takes several arguments, including the URL of the page to be opened, the name of the window or frame, and the features of the window (such as the size, location, and whether it should have a toolbar or menu). For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://www.example.com&#x27;</span>, <span class="string">&#x27;myWindow&#x27;</span>, <span class="string">&#x27;width=400,height=300&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>This will open a new window with the specified dimensions and the URL <code>https://www.example.com</code>. The <code>window.open()</code> method can be used to open a new window in response to a user action, such as clicking a link or button. It can also be used to open a new window programmatically, for example, to display a login form or to display additional information about a product.</p>
<ul>
<li>Frame Counting </li>
</ul>
<p>Access the frame’s <strong><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/length">window.length</a></strong> property which is used to retrieve the number of frames (IFRAME or FRAME) in the window.</p>
<p><strong>Methods</strong>: Frames, Pop-ups</p>
<p><strong>Difference</strong>: Page Content</p>
<p><strong>Summary:</strong> Read number of frames (window.length).</p>
<h2 id="怎么样获取页面上iframe-数量"><a href="#怎么样获取页面上iframe-数量" class="headerlink" title="怎么样获取页面上iframe 数量"></a>怎么样获取页面上iframe 数量</h2><p>需要使用window.length, 或者window.frames.length;</p>
<p>如果页面中不包含frame和iframe元素, 则返回0;</p>
<h1 id="iframe-相关"><a href="#iframe-相关" class="headerlink" title="iframe 相关"></a>iframe 相关</h1><ul>
<li><p>iframe使用场景</p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=iframe&spm=1001.2101.3001.7020">iframe</a>可用在以下几个场景中：<br>1.典型系统结构，左侧是功能树，右侧就是一些常见的table或者表单之类的。为了每一个功能，单独分离出来，采用iframe.<br>2.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=ajax&spm=1001.2101.3001.7020">ajax</a>上传文件<br>3.加载别的网站内容，例如google广告，网站流量分析。<br>4.在上传图片时，不用flash实现无刷新。<br>5.跨域访问的时候可以用到iframe，使用iframe请求不同域名下的资源。</p>
</li>
<li><p>Iframe 的好处</p>
<p>1.iframe是一种html封装，方便相同功能的网页复用代码，可以一定程度上减少开发量，不失为一种代码复 用的好计策；</p>
<p>2.iframe包含的代码几乎不会受到外界任何js或者css的影响（非常牛B的优点），可谓独树一帜，很任性；这种特点能减少很 多因为复用代码时，导致的css或者是js冲突，调试过程可谓痛苦，而且多半还要在错综复杂的关系纠葛中进 行修改，不小心可能会引入新的问题，iframe完全可以避免这种问题；</p>
<hr>
<p>1.iframe能够把嵌入的网页原样展现出来；</p>
<p>2.模块分离，便于更改，如果有多个网页引用iframe，只需要修改iframe的内容，就可以实现调用的每一个页面内容的更改，方便快捷；</p>
<p>3.网页如果为了统一风格，头部和版本都是一样的，就可以写成一个页面，用iframe来嵌套，增加代码的可重用；</p>
<p>4.如果遇到加载缓慢的第三方内容如图标和广告，这些问题可以由iframe来解决；</p>
<p>5.重载页面时不需要重载整个页面，只需要重载页面中的一个框架页；</p>
<p>6.方便制作导航栏。</p>
</li>
<li><p><strong>缺点:</strong> </p>
<p>1.样式和脚本需要额外链入，调用外部页面,需要额外调用css,增加页面额外的请求次数，增加服务器的http请求；</p>
<p>2.代码复杂，在网页中使用框架结构最大的弊病是搜索引擎的“蜘蛛”程序无法解读这种页面，会影响搜索引擎优化，不利于网站排名；</p>
<p>3.框架结构有时会让人感到迷惑，滚动条除了会挤占有限的页面空间外会使iframe布局混乱，还会分散访问者的注意力，影响用户体验；</p>
<p>4.链接导航疑问。运用框架结构时，必须保证正确配置所有的导航链接，否则，会给访问者带来很大的麻烦。比如被链接的页面出现在导航框架内，这种情况下访问者便被陷住了，因为此时他没有其他地点可去； </p>
<p>5.产生多个页面，不易管理；</p>
<p>6.多数小型的移动设备（PDA 手机）无法完全显示框架，设备兼容性差。</p>
</li>
</ul>
<h1 id="开发记录-原生nodejs实现"><a href="#开发记录-原生nodejs实现" class="headerlink" title="开发记录(原生nodejs实现)"></a>开发记录(原生nodejs实现)</h1><p>攻击者页面内配置乐天旅行的登录界面</p>
<p>用window.open() 打开登录界面</p>
<p>JavaScript记录iframe数，用户登录之后再记录iframe数</p>
<p>控制台信息打印在页面div标签（js实现）</p>
<p>nodejs服务端将iframe信息写入json储存</p>
<p>通过iframe的变化判断用户是否登录页面</p>
<h1 id="Attack-flow-window-open"><a href="#Attack-flow-window-open" class="headerlink" title="Attack flow window.open()"></a>Attack flow window.open()</h1><p>Get iframe of the page </p>
<p>攻击页面html + javascript / 后台Node.js</p>
<ul>
<li><p>使用window.open通常认为是一个不构成危险的选择?</p>
<p>Exploiting XS-Leaks with <code>window.open</code> is generally seen as the least appealing option for an attacker because the user can see it happen in the open browser window. However, it’s usually the right technique when:</p>
</li>
<li><p>我想我的前端页面和方式可以更好的欺骗用户</p>
</li>
</ul>
<h2 id="html页面"><a href="#html页面" class="headerlink" title="html页面"></a>html页面</h2><ul>
<li>前端功能</li>
</ul>
<ol>
<li>window.open()打开对应网站登录界面</li>
<li>js会读取iframe的数，用户登录后再记录iframe数</li>
<li>将控制台打印的iframe数输出在div标签中,css设置了flex大小</li>
<li>submit按钮后将iframe数输出给后台</li>
</ol>
<ul>
<li>记录两次，乐天旅行界面</li>
</ul>
<h1 id="Chrome-gt-Real-world-Test（登録ページ）"><a href="#Chrome-gt-Real-world-Test（登録ページ）" class="headerlink" title="Chrome-&gt;Real world Test（登録ページ）"></a>Chrome-&gt;Real world Test（登録ページ）</h1><ul>
<li>The 9 most popular types of websites and what they include</li>
</ul>
<ol>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Business">Business</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Ecommerce">Ecommerce</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Blogs">Blogs/news</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Portfolio">Portfolio</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Serviceprovider">Service provider (streaming, online tools, etc.)</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Landingpage">Landing page</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Wiki">Wiki/database</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Forum">Forum</a></li>
<li><a target="_blank" rel="noopener" href="https://en.99designs.jp/blog/web-digital/types-of-websites/#Event">Event</a></li>
</ol>
<h2 id="A-site"><a href="#A-site" class="headerlink" title="A site"></a>A site</h2><p>楽天トラベル登録ページ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://aps1.travel.rakuten.co.jp/portal/my/prv_page.first?f_tab=1</span><br></pre></td></tr></table></figure>

<ul>
<li>登録前</li>
</ul>
<p>The pattern1 is: <br>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0<br></p>
<ul>
<li>登録後</li>
</ul>
<p>The pattern2 is: <br>4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4<br></p>
<h2 id="B-Site"><a href="#B-Site" class="headerlink" title="B Site"></a>B Site</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line"></span><br><span class="line">https://jp.mercari.com/signin?params=client_id%3DbP4zN6jIZQeutikiUFpbx307DVK1pmoW%26code_challenge%3DlCy6XEvYsmhTigeVxvqVXGPDlXxdG-JTd79sM6GQihY%26code_challenge_method%3DS256%26noBackButton%3D1%26nonce%3DXksgrzLuxz9U%26redirect_uri%3Dhttps%253A%252F%252Fjp.mercari.com%252Fauth%252Fcallback%26response_type%3Dcode%26scope%3Dmercari%2520openid%26state%3DeyJwYXRoIjoiLyIsInJhbmRvbSI6Ii1MRkVFdkhjbk9pVCJ9%26ui_locales%3Dja</span><br></pre></td></tr></table></figure>

<ul>
<li>登録前</li>
</ul>
<p>The pattern1 is: <br>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0<br></p>
<ul>
<li>登録後　記録</li>
</ul>
<p>The pattern1 is:<br>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0<br>The pattern2 is:<br>0, 0, 0, 0, 0, 0<br>The pattern3 is:<br>2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2<br></p>
<h2 id="yahoo-mail"><a href="#yahoo-mail" class="headerlink" title="yahoo.mail"></a>yahoo.mail</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line"></span><br><span class="line">https://login.yahoo.com/manage_account?pspid=159600001&amp;activity=mail-direct&amp;.lang=en-US&amp;.intl=us&amp;src=ym&amp;signin=true&amp;done=https%3A%2F%2Fmail.yahoo.com%2Fd&amp;eid=100</span><br></pre></td></tr></table></figure>

<p>账号 chenduo1996</p>
<p>密码 2022abcdABCD</p>
<ul>
<li><p>登録前</p>
<p>The pattern1 is:<br>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0<br>The pattern2 is:<br>0, 0, 0, 0, 0, 0<br></p>
</li>
<li><p>登録後</p>
<p>The pattern3 is:<br></p>
<p>6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6<br></p>
</li>
</ul>
<h2 id="gmail-メール"><a href="#gmail-メール" class="headerlink" title="gmail メール"></a>gmail メール</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line">https://accounts.google.com/ServiceLogin/signinchooser?service=mail&amp;passive=1209600&amp;osid=1&amp;continue=https%3A%2F%2Fmail.google.com%2Fmail%2Fu%2F0%2F&amp;followup=https%3A%2F%2Fmail.google.com%2Fmail%2Fu%2F0%2F&amp;emr=1&amp;ifkv=AeAAQh6koTGOpJ3eHQ1w9ddCCrHFIv4yKYjYYyQ4_oOPUUIm1PRtbp1aPZZaojJGDi6S_jm9SzqA0w&amp;flowName=GlifWebSignIn&amp;flowEntry=ServiceLogin</span><br></pre></td></tr></table></figure>

<ul>
<li>登録前</li>
</ul>
<p>The pattern1 is:<br>2, 2, 2, 2, 2, 2<br>The pattern2 is:<br>2, 2, 2, 2, 2, 2</p>
<ul>
<li>登録後</li>
</ul>
<p>The pattern3 is:<br>4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4</p>
<h2 id="a-bank"><a href="#a-bank" class="headerlink" title="a bank"></a>a bank</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line">://entry11.bk.mufg.jp/ibg/dfw/APLIN/loginib/login?_TRANID=AG004_001&amp;link_id=kojin_top_direct_login_shinki&amp;_gl=1<span class="symbol">&amp;#42;</span>k7mlu9<span class="symbol">&amp;#42;</span>_gcl_aw<span class="symbol">&amp;#42;</span>R0NMLjE2NzA2MDg1MjIuQ2owS0NRaUExc3VjQmhEZ0FSSXNBRm95dFVzanBiSUx4QmV6S1FqLU84VFllYTQ4TWI2VzZ6bTNBWElRejB2RnVrdE1DVTZqa3RROEVmVWFBbHYzRUFMd193Y0I.</span><br></pre></td></tr></table></figure>



<ul>
<li>登録前</li>
</ul>
<p>The pattern1 is:<br>0, 9, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 2, 4<br>The pattern2 is:<br>2, 2, 2, 2, 2, 2, 2</p>
<ul>
<li>登録後</li>
</ul>
<p>The pattern3 is:<br>3, 3, 3, 3, 3, 3, 3</p>
<h2 id="リクナビ2023-できない"><a href="#リクナビ2023-できない" class="headerlink" title="リクナビ2023(できない)"></a>リクナビ2023(できない)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line">https://job.rikunabi.com/2023/auth/topLoginform/?toplocationUrl=17e39e8a070383eb860b3c672bf8ef7c4fc7df183b1369bf&amp;topPattern=mypage&amp;sslMode=1&amp;menu=p&amp;isc=r21rcnf00518</span><br></pre></td></tr></table></figure>

<ul>
<li>登録前</li>
</ul>
<p>The pattern1 is:<br>0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4</p>
<ul>
<li>登録後</li>
</ul>
<p>The pattern2 is:<br>4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4</p>
<ul>
<li>トップページ</li>
</ul>
<p>The pattern3 is:<br>5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5</p>
<h2 id="youtube"><a href="#youtube" class="headerlink" title="youtube"></a>youtube</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login page</span><br><span class="line">https://accounts.google.com/ServiceLogin/signinchooser?service=youtube&amp;passive=1209600&amp;continue=https%3A%2F%2Fstudio.youtube.com%2F%3Fcsr%3Danalytics%26hl%3Dja&amp;followup=https%3A%2F%2Fstudio.youtube.com%2F%3Fcsr%3Danalytics%26hl%3Dja&amp;hl=ja&amp;ifkv=AeAAQh6cF271ANUvTvVsVNWPPrtWMIWKXSR0bXikwXJ6dPIwoL6ibdAwwrzhqIjQYR0Ei5OwFytVcQ&amp;flowName=GlifWebSignIn&amp;flowEntry=ServiceLogin</span><br></pre></td></tr></table></figure>



<ul>
<li>登録前</li>
</ul>
<p> The pattern1 is:<br>0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2<br>The pattern2 is:<br>2, 0, 0, 1, 2, 3, 3<br></p>
<ul>
<li>登録後</li>
</ul>
<p>The pattern3 is:<br>3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3<br></p>
<h1 id="Firefox-safari"><a href="#Firefox-safari" class="headerlink" title="Firefox,safari"></a>Firefox,safari</h1><h1 id="Real-world-Test（）"><a href="#Real-world-Test（）" class="headerlink" title="Real world Test（）"></a>Real world Test（）</h1><h1 id="研究plan"><a href="#研究plan" class="headerlink" title="研究plan"></a>研究plan</h1><ul>
<li><p><input checked disabled type="checkbox">  他の登録ページをテストする</p>
</li>
<li><p><input checked disabled type="checkbox">  登録ページだけではなく,他の種類ページもテストする</p>
</li>
</ul>
<h1 id="テストページを作る"><a href="#テストページを作る" class="headerlink" title="テストページを作る"></a>テストページを作る</h1><ul>
<li>Login page </li>
</ul>
<h1 id="防御方法"><a href="#防御方法" class="headerlink" title="防御方法"></a>防御方法</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://tarvent.github.io/chenduo-blog.github.io">Chen Duo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://tarvent.github.io/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/">https://tarvent.github.io/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/chenduo-blog.github.io/tags/Research/">Research</a></div><div class="post_share"><div class="social-share" data-image="/chenduo-blog.github.io/img/IMG_7804.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/chenduo-blog.github.io/2022/10/12/Cross-site-leaks%E7%A0%94%E7%A9%B6/" title="XS-Leaks 先行研究"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">XS-Leaks 先行研究</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/chenduo-blog.github.io/img/IMG_7804.jpeg" onerror="this.onerror=null;this.src='/chenduo-blog.github.io/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name"></div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/chenduo-blog.github.io/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/chenduo-blog.github.io/tags/"><div class="headline">Tags</div><div class="length-num">14</div></a><a href="/chenduo-blog.github.io/categories/"><div class="headline">Categories</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Tarvent"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Tarvent" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:chenduo1026@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">分享web,java,web安全</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Master-research"><span class="toc-number">1.</span> <span class="toc-text">Master research</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#XS-leaks-attack-through-iframe"><span class="toc-number">2.</span> <span class="toc-text">XS-leaks attack through iframe</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E6%A0%B7%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E4%B8%8Aiframe-%E6%95%B0%E9%87%8F"><span class="toc-number">2.1.</span> <span class="toc-text">怎么样获取页面上iframe 数量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iframe-%E7%9B%B8%E5%85%B3"><span class="toc-number">3.</span> <span class="toc-text">iframe 相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95-%E5%8E%9F%E7%94%9Fnodejs%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.</span> <span class="toc-text">开发记录(原生nodejs实现)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Attack-flow-window-open"><span class="toc-number">5.</span> <span class="toc-text">Attack flow window.open()</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#html%E9%A1%B5%E9%9D%A2"><span class="toc-number">5.1.</span> <span class="toc-text">html页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chrome-gt-Real-world-Test%EF%BC%88%E7%99%BB%E9%8C%B2%E3%83%9A%E3%83%BC%E3%82%B8%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">Chrome-&gt;Real world Test（登録ページ）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#A-site"><span class="toc-number">6.1.</span> <span class="toc-text">A site</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#B-Site"><span class="toc-number">6.2.</span> <span class="toc-text">B Site</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yahoo-mail"><span class="toc-number">6.3.</span> <span class="toc-text">yahoo.mail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gmail-%E3%83%A1%E3%83%BC%E3%83%AB"><span class="toc-number">6.4.</span> <span class="toc-text">gmail メール</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#a-bank"><span class="toc-number">6.5.</span> <span class="toc-text">a bank</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%AA%E3%82%AF%E3%83%8A%E3%83%932023-%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><span class="toc-number">6.6.</span> <span class="toc-text">リクナビ2023(できない)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#youtube"><span class="toc-number">6.7.</span> <span class="toc-text">youtube</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Firefox-safari"><span class="toc-number">7.</span> <span class="toc-text">Firefox,safari</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Real-world-Test%EF%BC%88%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">Real world Test（）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A0%94%E7%A9%B6plan"><span class="toc-number">9.</span> <span class="toc-text">研究plan</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%83%86%E3%82%B9%E3%83%88%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E3%82%8B"><span class="toc-number">10.</span> <span class="toc-text">テストページを作る</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95"><span class="toc-number">11.</span> <span class="toc-text">防御方法</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/chenduo-blog.github.io/2023/01/17/XS-Leaks%E6%94%BB%E5%87%BB/" title="XS-Leaks attack through iframe counting">XS-Leaks attack through iframe counting</a><time datetime="2023-01-16T15:53:23.000Z" title="Created 2023-01-17 00:53:23">2023-01-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/chenduo-blog.github.io/2022/10/12/Cross-site-leaks%E7%A0%94%E7%A9%B6/" title="XS-Leaks 先行研究">XS-Leaks 先行研究</a><time datetime="2022-10-11T15:00:00.000Z" title="Created 2022-10-12 00:00:00">2022-10-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/chenduo-blog.github.io/2022/10/03/%E8%AB%96%E6%96%87%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E6%8F%90%E6%A1%88%E6%89%8B%E6%B3%95%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9/" title="論文における提案手法の書き方">論文における提案手法の書き方</a><time datetime="2022-10-02T15:00:00.000Z" title="Created 2022-10-03 00:00:00">2022-10-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/chenduo-blog.github.io/2022/10/01/js(javascript)%E5%8F%96%E5%BE%97%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E5%B0%8F%E6%97%B6%EF%BC%8C%E5%88%86%E9%92%9F%EF%BC%8C%E7%A7%92%20%E4%BB%A5%E5%8F%8A%E6%AF%AB%E7%A7%92/" title="JavaScript get hour, minute and millisecond">JavaScript get hour, minute and millisecond</a><time datetime="2022-09-30T15:00:00.000Z" title="Created 2022-10-01 00:00:00">2022-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/chenduo-blog.github.io/2022/09/10/LeetCode_70(%E6%AF%8F%E6%97%A5)/" title="LeetCode 70_climbing stairs（Java）">LeetCode 70_climbing stairs（Java）</a><time datetime="2022-09-09T15:00:00.000Z" title="Created 2022-09-10 00:00:00">2022-09-10</time></div></div></div></div></div></div></main><footer id="footer" style="background: -#0000FF"><div id="footer-wrap"><div class="footer_custom_text">ChenDuo Blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/chenduo-blog.github.io/js/utils.js"></script><script src="/chenduo-blog.github.io/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'mwm3RfzU6ZOmctdlDBjPoCjc-MdYXbMMI',
      appKey: 'SAXq7oTXYlkde7LobGQ9X3zM',
      avatar: 'monsterid',
      serverURLs: 'https://mwm3rfzu.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>